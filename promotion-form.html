<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Promotion Recommendation | Galactic Archives</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function(){
            // Initialize EmailJS with your Public Key
            emailjs.init("8XqZo5lri3xJFM8tf");
        })();
    </script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0c0a1f;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(129, 140, 248, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(192, 132, 252, 0.15) 0%, transparent 40%),
                url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"%3E%3Cg fill="%23ffffff" fill-opacity="0.05"%3E%3Ccircle cx="50" cy="50" r="1"/%3E%3Ccircle cx="10" cy="10" r="1"/%3E%3Ccircle cx="90" cy="90" r="1"/%3E%3C/g%3E%3C/svg%3E');
            color: #e0e7ff;
            min-height: 100vh;
        }

        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        
        .glow-text {
            text-shadow: 0 0 8px rgba(129, 140, 248, 0.6), 0 0 12px rgba(167, 139, 250, 0.4);
        }
        
        .glass-panel {
            background: rgba(17, 24, 39, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(129, 140, 248, 0.2);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
        }

        input, select, textarea {
            background: rgba(17, 24, 39, 0.5);
            border: 1px solid rgba(129, 140, 248, 0.3);
            color: #e0e7ff;
            transition: all 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #818cf8;
            box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.1);
            background: rgba(17, 24, 39, 0.7);
        }

        input::placeholder, textarea::placeholder {
            color: #9ca3af;
        }

        label {
            color: #c7d2fe;
            font-weight: 600;
        }

        .loading-spinner {
            border: 3px solid rgba(129, 140, 248, 0.3);
            border-top: 3px solid #818cf8;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="p-6 md:p-12">
    
    <div class="max-w-3xl mx-auto">
        
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="font-orbitron text-4xl md:text-5xl font-bold text-white tracking-widest glow-text mb-4">
                PROMOTION<br>RECOMMENDATION
            </h1>
            <p class="text-indigo-300 text-lg">Nominate a student for rank advancement</p>
        </header>

        <!-- Form -->
        <form id="promotionForm" class="glass-panel p-8 md:p-10 rounded-xl">
            
            <!-- Mentor Information -->
            <section class="mb-8 pb-8 border-b border-indigo-500/30">
                <h2 class="font-orbitron text-2xl text-white mb-6"><i class="fas fa-user-tie text-indigo-400 mr-2"></i>Mentor Information</h2>
                
                <div class="space-y-4">
                    <div>
                        <label for="mentor_name" class="block mb-2">Your Name *</label>
                        <input type="text" id="mentor_name" name="mentor_name" required 
                               class="w-full px-4 py-3 rounded-lg" 
                               placeholder="Enter your full name">
                    </div>
                    
                    <div>
                        <label for="mentor_email" class="block mb-2">Your Email *</label>
                        <input type="email" id="mentor_email" name="mentor_email" required 
                               class="w-full px-4 py-3 rounded-lg" 
                               placeholder="mentor@example.com">
                    </div>

                    <div>
                        <label for="mentor_discord" class="block mb-2">Discord Username</label>
                        <input type="text" id="mentor_discord" name="mentor_discord" 
                               class="w-full px-4 py-3 rounded-lg" 
                               placeholder="username#0000">
                    </div>
                </div>
            </section>

            <!-- Student Information -->
            <section class="mb-8 pb-8 border-b border-indigo-500/30">
                <h2 class="font-orbitron text-2xl text-white mb-6"><i class="fas fa-user-graduate text-violet-400 mr-2"></i>Student Information</h2>
                
                <div class="space-y-4">
                    <div>
                        <label for="student_name" class="block mb-2">Student Name *</label>
                        <input type="text" id="student_name" name="student_name" required 
                               class="w-full px-4 py-3 rounded-lg" 
                               placeholder="Enter student's full name">
                    </div>
                    
                    <div>
                        <label for="student_email" class="block mb-2">Student Email *</label>
                        <input type="email" id="student_email" name="student_email" required 
                               class="w-full px-4 py-3 rounded-lg" 
                               placeholder="student@university.edu">
                    </div>

                    <div>
                        <label for="student_discord" class="block mb-2">Student Discord Username</label>
                        <input type="text" id="student_discord" name="student_discord" 
                               class="w-full px-4 py-3 rounded-lg" 
                               placeholder="username#0000">
                    </div>

                    <div>
                        <label for="student_team" class="block mb-2">Team Name</label>
                        <input type="text" id="student_team" name="student_team" 
                               class="w-full px-4 py-3 rounded-lg" 
                               placeholder="Enter team name if applicable">
                    </div>
                </div>
            </section>

            <!-- Current and Proposed Rank -->
            <section class="mb-8 pb-8 border-b border-indigo-500/30">
                <h2 class="font-orbitron text-2xl text-white mb-6"><i class="fas fa-chevron-up text-green-400 mr-2"></i>Promotion Details</h2>
                
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label for="current_rank" class="block mb-2">Current Rank *</label>
                        <select id="current_rank" name="current_rank" required 
                                class="w-full px-4 py-3 rounded-lg">
                            <option value="">Select current rank...</option>
                            <option value="Cadet">Cadet</option>
                            <option value="Ensign">Ensign</option>
                            <option value="Lieutenant Commander">Lieutenant Commander</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="proposed_rank" class="block mb-2">Proposed Rank *</label>
                        <select id="proposed_rank" name="proposed_rank" required 
                                class="w-full px-4 py-3 rounded-lg">
                            <option value="">Select proposed rank...</option>
                            <option value="Ensign">Ensign</option>
                            <option value="Lieutenant Commander">Lieutenant Commander</option>
                            <option value="Commander">Commander</option>
                        </select>
                    </div>
                </div>

                <!-- Visual Rank Progression -->
                <div class="bg-indigo-900/20 p-6 rounded-lg border border-indigo-500/20">
                    <p class="text-sm text-indigo-300 mb-4 text-center">Standard Progression Path</p>
                    <div class="flex items-center justify-center space-x-4 text-xs">
                        <div class="text-center">
                            <div class="w-12 h-12 mx-auto mb-2">
                                <svg width="100%" height="100%" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M50 15 L20 45 C 20 75, 80 75, 80 45 L50 15Z" stroke="#D4AF37" stroke-width="4" fill="none"/>
                                </svg>
                            </div>
                            <p class="text-violet-300 font-orbitron">Cadet</p>
                        </div>
                        <i class="fas fa-arrow-right text-indigo-500"></i>
                        <div class="text-center">
                            <div class="w-12 h-12 mx-auto mb-2">
                                <svg width="100%" height="100%" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" fill="#D4AF37">
                                    ircle cx="50" cy="50" r="12" />
                                </svg>
                            </div>
                            <p class="text-violet-300 font-orbitron">Ensign</p>
                        </div>
                        <i class="fas fa-arrow-right text-indigo-500"></i>
                        <div class="text-center">
                            <div class="w-12 h-12 mx-auto mb-2">
                                <svg width="100%" height="100%" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" fill="#D4AF37">
                                    ircle cx="28" cy="50" r="10"/>
                                    ircle cx="50" cy="50" r="10" fill="#111827" stroke="#D4AF37" stroke-width="3"/>
                                    ircle cx="72" cy="50" r="10"/>
                                </svg>
                            </div>
                            <p class="text-violet-300 font-orbitron text-[10px]">Lt. Cmdr</p>
                        </div>
                        <i class="fas fa-arrow-right text-indigo-500"></i>
                        <div class="text-center">
                            <div class="w-12 h-12 mx-auto mb-2">
                                <svg width="100%" height="100%" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" fill="#D4AF37">
                                    ircle cx="28" cy="50" r="10"/>
                                    ircle cx="50" cy="50" r="10"/>
                                    ircle cx="72" cy="50" r="10"/>
                                </svg>
                            </div>
                            <p class="text-violet-300 font-orbitron">Cmdr</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Justification -->
            <section class="mb-8 pb-8 border-b border-indigo-500/30">
                <h2 class="font-orbitron text-2xl text-white mb-6"><i class="fas fa-clipboard-list text-yellow-400 mr-2"></i>Justification</h2>
                
                <div class="mb-6">
                    <label class="block mb-3">Demonstrated Qualities (check all that apply) *</label>
                    <div class="space-y-2">
                        <label class="flex items-center text-indigo-200 cursor-pointer hover:text-white">
                            <input type="checkbox" name="qualities" value="Technical Excellence & Innovation" class="mr-3 w-5 h-5">
                            <i class="fas fa-star text-yellow-400 mr-2"></i>
                            Technical Excellence & Innovation
                        </label>
                        <label class="flex items-center text-indigo-200 cursor-pointer hover:text-white">
                            <input type="checkbox" name="qualities" value="Exceptional Teamwork & Collaboration" class="mr-3 w-5 h-5">
                            <i class="fas fa-users text-blue-400 mr-2"></i>
                            Exceptional Teamwork & Collaboration
                        </label>
                        <label class="flex items-center text-indigo-200 cursor-pointer hover:text-white">
                            <input type="checkbox" name="qualities" value="Leadership & Initiative" class="mr-3 w-5 h-5">
                            <i class="fas fa-trophy text-amber-400 mr-2"></i>
                            Leadership & Initiative
                        </label>
                        <label class="flex items-center text-indigo-200 cursor-pointer hover:text-white">
                            <input type="checkbox" name="qualities" value="Outstanding Problem-Solving" class="mr-3 w-5 h-5">
                            <i class="fas fa-lightbulb text-indigo-400 mr-2"></i>
                            Outstanding Problem-Solving
                        </label>
                        <label class="flex items-center text-indigo-200 cursor-pointer hover:text-white">
                            <input type="checkbox" name="qualities" value="Peer Mentorship & Knowledge Sharing" class="mr-3 w-5 h-5">
                            <i class="fas fa-hands-helping text-purple-400 mr-2"></i>
                            Peer Mentorship & Knowledge Sharing
                        </label>
                    </div>
                </div>

                <div class="mb-6">
                    <label for="achievements" class="block mb-2">Specific Achievements *</label>
                    <textarea id="achievements" name="achievements" required rows="4" 
                              class="w-full px-4 py-3 rounded-lg" 
                              placeholder="Describe specific projects, contributions, or accomplishments that demonstrate this student's readiness for promotion..."></textarea>
                    <p class="text-xs text-indigo-400 mt-1">Include technical details, challenges overcome, and impact on team/project.</p>
                </div>

                <div>
                    <label for="reasoning" class="block mb-2">Additional Reasoning *</label>
                    <textarea id="reasoning" name="reasoning" required rows="4" 
                              class="w-full px-4 py-3 rounded-lg" 
                              placeholder="Why do you believe this student deserves this promotion? What sets them apart from their peers?"></textarea>
                </div>
            </section>

            <!-- Evidence -->
            <section class="mb-8">
                <h2 class="font-orbitron text-2xl text-white mb-6"><i class="fas fa-link text-indigo-400 mr-2"></i>Supporting Evidence</h2>
                
                <div class="space-y-4">
                    <div>
                        <label for="project_link" class="block mb-2">Project/Repository Link</label>
                        <input type="url" id="project_link" name="project_link" 
                               class="w-full px-4 py-3 rounded-lg" 
                               placeholder="https://github.com/username/project">
                    </div>
                    
                    <div>
                        <label for="additional_links" class="block mb-2">Additional Evidence Links</label>
                        <textarea id="additional_links" name="additional_links" rows="3" 
                                  class="w-full px-4 py-3 rounded-lg" 
                                  placeholder="Provide any additional links (Discord messages, demo videos, documentation, etc.)"></textarea>
                    </div>
                </div>
            </section>

            <!-- Submit Button -->
            <div class="text-center pt-6 border-t border-indigo-500/30">
                <button type="submit" id="submitBtn" class="submit-btn font-orbitron font-bold text-white px-10 py-4 rounded-full uppercase tracking-wider transition-all transform hover:-translate-y-1 hover:scale-105" 
                        style="background: linear-gradient(90deg, #818cf8, #c084fc); box-shadow: 0 0 20px rgba(167, 139, 250, 0.5);">
                    <i class="fas fa-paper-plane mr-2"></i>Submit Recommendation
                </button>
                <p class="text-xs text-indigo-400 mt-4">All promotions are reviewed by Stella Command</p>
                <div id="loadingSpinner" class="loading-spinner hidden mt-4"></div>
            </div>

        </form>

        <!-- Success Message (Hidden by default) -->
        <div id="successMessage" class="hidden glass-panel p-8 rounded-xl mt-8 text-center border-2 border-green-500">
            <i class="fas fa-check-circle text-6xl text-green-400 mb-4"></i>
            <h2 class="font-orbitron text-3xl text-white mb-4">Transmission Received</h2>
            <p class="text-green-200 text-lg mb-2">
                Your promotion recommendation has been successfully submitted to Stella Command.
            </p>
            <p class="text-indigo-300 text-sm">
                The Admiral and Vice Admiral will review this nomination and make a determination.
            </p>
            <button onclick="resetForm()" class="mt-6 font-orbitron text-sm text-indigo-400 hover:text-white border border-indigo-500 px-6 py-2 rounded-full transition-colors">
                Submit Another Recommendation
            </button>
        </div>

    </div>

    <script>
        // Form handling
        const form = document.getElementById('promotionForm');
        const successMessage = document.getElementById('successMessage');
        const submitBtn = document.getElementById('submitBtn');
        const loadingSpinner = document.getElementById('loadingSpinner');

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validate that at least one quality is checked
            const qualities = form.querySelectorAll('input[name="qualities"]:checked');
            if (qualities.length === 0) {
                alert('Please select at least one demonstrated quality.');
                return;
            }

            // Show loading state
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Sending...';
            loadingSpinner.classList.remove('hidden');

            // Collect form data
            const formData = {};
            
            // Get text inputs
            formData.mentor_name = document.getElementById('mentor_name').value;
            formData.mentor_email = document.getElementById('mentor_email').value;
            formData.mentor_discord = document.getElementById('mentor_discord').value || 'Not provided';
            formData.student_name = document.getElementById('student_name').value;
            formData.student_email = document.getElementById('student_email').value;
            formData.student_discord = document.getElementById('student_discord').value || 'Not provided';
            formData.student_team = document.getElementById('student_team').value || 'Not provided';
            formData.current_rank = document.getElementById('current_rank').value;
            formData.proposed_rank = document.getElementById('proposed_rank').value;
            formData.achievements = document.getElementById('achievements').value;
            formData.reasoning = document.getElementById('reasoning').value;
            formData.project_link = document.getElementById('project_link').value || 'Not provided';
            formData.additional_links = document.getElementById('additional_links').value || 'Not provided';
            
            // Get checked qualities as comma-separated string
            const qualitiesArray = Array.from(qualities).map(cb => cb.value);
            formData.qualities = qualitiesArray.join(', ');

            // Send email using EmailJS
            emailjs.send('service_8ekuyrb', 'template_ak23vaj', formData)
                .then(function(response) {
                    console.log('SUCCESS!', response.status, response.text);
                    
                    // Hide form, show success message
                    form.style.display = 'none';
                    loadingSpinner.classList.add('hidden');
                    successMessage.classList.remove('hidden');
                    
                    // Scroll to top
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }, function(error) {
                    console.log('FAILED...', error);
                    
                    // Reset button state
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<i class="fas fa-paper-plane mr-2"></i>Submit Recommendation';
                    loadingSpinner.classList.add('hidden');
                    
                    alert('Failed to send recommendation. Please try again or contact support.');
                });
        });

        function resetForm() {
            form.reset();
            form.style.display = 'block';
            successMessage.classList.add('hidden');
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<i class="fas fa-paper-plane mr-2"></i>Submit Recommendation';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Dynamic rank validation
        const currentRank = document.getElementById('current_rank');
        const proposedRank = document.getElementById('proposed_rank');

        currentRank.addEventListener('change', function() {
            const current = this.value;
            const proposedOptions = proposedRank.querySelectorAll('option');
            
            proposedOptions.forEach(option => {
                option.disabled = false;
            });

            // Disable invalid promotions
            if (current === 'Cadet') {
                proposedOptions.forEach(option => {
                    if (option.value === 'Lieutenant Commander' || option.value === 'Commander') {
                        option.disabled = true;
                    }
                });
            } else if (current === 'Ensign') {
                proposedOptions.forEach(option => {
                    if (option.value === 'Ensign') {
                        option.disabled = true;
                    }
                });
            } else if (current === 'Lieutenant Commander') {
                proposedOptions.forEach(option => {
                    if (option.value !== 'Commander' && option.value !== '') {
                        option.disabled = true;
                    }
                });
            }
        });
    </script>

</body>
</html>
