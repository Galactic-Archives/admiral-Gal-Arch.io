<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galactic Archives Store</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0c0a1f;
            background-image: radial-gradient(circle at 20% 30%, rgba(129, 140, 248, 0.15) 0%, transparent 40%), radial-gradient(circle at 80% 70%, rgba(192, 132, 252, 0.15) 0%, transparent 40%);
            color: #e0e7ff;
            min-height: 100vh;
        }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .glow-text { text-shadow: 0 0 8px rgba(129, 140, 248, 0.6), 0 0 12px rgba(167, 139, 250, 0.4); }
        .glass-panel {
            background: rgba(17, 24, 39, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(129, 140, 248, 0.2);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
            border-radius: 1rem;
        }
        .product-card { transition: all 0.3s ease; }
        .product-card:hover { transform: translateY(-5px); border-color: #818cf8; box-shadow: 0 0 20px rgba(129, 140, 248, 0.4); }
        .btn-primary {
            background: linear-gradient(90deg, #818cf8 0%, #c084fc 100%);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(192, 132, 252, 0.4);
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(192, 132, 252, 0.6); }
        .loader { border: 4px solid rgba(255, 255, 255, 0.1); border-top: 4px solid #818cf8; border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .category-filter { cursor: pointer; transition: all 0.3s ease; }
        .category-filter:hover { background: rgba(129, 140, 248, 0.2); }
        .category-filter.active { background: linear-gradient(90deg, rgba(129, 140, 248, 0.3), rgba(192, 132, 252, 0.3)); border-color: #818cf8; }
    </style>
</head>
<body>
    <header class="text-center py-12 px-4 border-b border-indigo-900/50">
        <h1 class="font-orbitron text-4xl md:text-6xl font-bold uppercase tracking-widest text-white glow-text">Galactic Archives Store</h1>
        <p class="mt-4 text-lg md:text-xl text-indigo-300 font-light">Premium Merchandise for Space Explorers</p>
    </header>
    <nav class="container mx-auto px-4 mt-8 mb-4">
        <div class="glass-panel p-4 flex flex-wrap justify-center gap-4">
            <a href="./index.html" class="text-indigo-300 hover:text-white transition-colors">Home</a>
            <a href="./roles-ranks.html" class="text-indigo-300 hover:text-white transition-colors">Roles & Ranks</a>
            <a href="./store.html" class="text-white font-bold">Store</a>
        </div>
    </nav>
    <main class="container mx-auto px-4 py-8">
        <section class="mb-8">
            <h2 class="font-orbitron text-2xl font-bold text-white mb-4">Categories</h2>
            <div id="categories" class="flex flex-wrap gap-3">
                <button class="category-filter active glass-panel px-6 py-2 text-sm font-medium text-indigo-200" data-category="all">All Products</button>
            </div>
        </section>
        <div id="loading" class="flex flex-col items-center justify-center py-20">
            <div class="loader"></div>
            <p class="text-indigo-300 mt-4 font-orbitron">Accessing Printful Database...</p>
        </div>
        <div id="error" class="hidden">
            <div class="glass-panel p-8 text-center border border-red-500/50">
                <h3 class="font-orbitron text-xl text-red-400 mb-2">Connection Lost</h3>
                <p class="text-indigo-300">Unable to retrieve product data. Please check your API configuration.</p>
                <button onclick="loadProducts()" class="btn-primary text-white font-bold py-2 px-6 rounded-full mt-4">Retry Connection</button>
            </div>
        </div>
        <section id="products-container" class="hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="font-orbitron text-2xl font-bold text-white">Available Products</h2>
                <p id="product-count" class="text-indigo-400"></p>
            </div>
            <div id="products-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>
        </section>
    </main>
    <footer class="text-center py-8 border-t border-indigo-900/50 mt-16">
        <p class="text-indigo-400">Â© 2025 Galactic Archives. All rights reserved.</p>
        <p class="text-indigo-500 text-sm mt-2">Powered by Printful</p>
    </footer>
    <script>
        const PRINTFUL_API_KEY = 'YOUR_PRINTFUL_API_KEY';
        const API_BASE = 'https://api.printful.com';
        let allProducts = [];
        document.addEventListener('DOMContentLoaded', () => { loadProducts(); });
        async function loadProducts() {
            const loading = document.getElementById('loading');
            const error = document.getElementById('error');
            const container = document.getElementById('products-container');
            loading.classList.remove('hidden');
            error.classList.add('hidden');
            container.classList.add('hidden');
            try {
                const response = await fetch(`${API_BASE}/products`, { headers: { 'Authorization': `Bearer ${PRINTFUL_API_KEY}` } });
                if (!response.ok) throw new Error(`API Error: ${response.status}`);
                const data = await response.json();
                allProducts = data.result || [];
                loading.classList.add('hidden');
                container.classList.remove('hidden');
                displayProducts(allProducts);
                extractCategories(allProducts);
            } catch (err) {
                console.error('Error loading products:', err);
                loading.classList.add('hidden');
                error.classList.remove('hidden');
            }
        }
        function extractCategories(products) {
            const categories = new Set();
            products.forEach(product => { if (product.type_name) categories.add(product.type_name); });
            const categoriesContainer = document.getElementById('categories');
            categories.forEach(category => {
                const button = document.createElement('button');
                button.className = 'category-filter glass-panel px-6 py-2 text-sm font-medium text-indigo-200';
                button.setAttribute('data-category', category);
                button.textContent = category;
                button.onclick = () => filterByCategory(category);
                categoriesContainer.appendChild(button);
            });
        }
        function filterByCategory(category) {
            document.querySelectorAll('.category-filter').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-category="${category}"]`).classList.add('active');
            const filtered = category === 'all' ? allProducts : allProducts.filter(p => p.type_name === category);
            displayProducts(filtered);
        }
        function displayProducts(products) {
            const grid = document.getElementById('products-grid');
            const countEl = document.getElementById('product-count');
            countEl.textContent = `${products.length} products found`;
            grid.innerHTML = '';
            products.forEach(product => { grid.appendChild(createProductCard(product)); });
        }
        function createProductCard(product) {
            const div = document.createElement('div');
            div.className = 'product-card glass-panel p-4 flex flex-col';
            const img = document.createElement('div');
            img.className = 'bg-indigo-900/30 h-48 rounded-lg mb-4 flex items-center justify-center overflow-hidden';
            if (product.image) {
                const imgEl = document.createElement('img');
                imgEl.src = product.image;
                imgEl.alt = product.title;
                imgEl.className = 'w-full h-full object-cover';
                img.appendChild(imgEl);
            } else {
                img.innerHTML = '<span class="font-orbitron text-indigo-500 text-xs">No Image</span>';
            }
            const title = document.createElement('h3');
            title.className = 'font-orbitron text-white font-bold mb-2 text-sm min-h-[40px]';
            title.textContent = product.title || 'Product';
            const type = document.createElement('p');
            type.className = 'text-indigo-400 text-xs mb-2';
            type.textContent = product.type_name || '';
            const brand = document.createElement('p');
            brand.className = 'text-indigo-500 text-xs mb-4';
            brand.textContent = product.brand || '';
            const button = document.createElement('button');
            button.className = 'btn-primary text-white font-bold py-2 px-4 rounded-full text-sm mt-auto';
            button.textContent = 'View Details';
            button.onclick = () => alert(`Product: ${product.title}\n\nReplace YOUR_PRINTFUL_API_KEY in the code with your actual Printful private token to enable full functionality.`);
            div.appendChild(img);
            div.appendChild(title);
            div.appendChild(type);
            div.appendChild(brand);
            div.appendChild(button);
            return div;
        }
    </script>
</body>
</html>
